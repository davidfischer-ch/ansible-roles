---

- hosts:
    - all
  roles:
    - bootstrap
    - fail2ban
    - ufw
    - miscellaneous
    - kernel
    - python
  tags:
    - bootstrap-step

- hosts:
    - newrelic
  roles:
    - newrelic
  tags:
    - newrelic-step

- hosts:
    - caching
  roles:
    - redis
  tags:
    - caching-step

- hosts:
    - database
  roles:
    - postgresql
  tags:
    - database-step

- hosts:
    - messaging
  roles:
    - rabbitmq
  tags:
    - messaging-step

# - hosts:
#     - monitoring
#   roles:
#     - graphite
#   tags:
#     - monitoring-step

- hosts:
    - proxy
  roles:
    - haproxy
  tags:
    - proxy-step

- hosts:
    - storage
  roles:
    - nfs
  tags:
    - storage-step

- hosts:
    - web
    - worker
  roles:
    - mounts
    - <here-the-role-for-your-django-app>
  max_fail_percentage: 0
  tags:
    - application-step

- hosts:
    - web
  roles:
    - nginx
    - uwsgi
  tags:
    - application-step

- hosts:
    - worker
  roles:
    - celery
  tags:
    - application-step

- hosts:
    - ampache
  roles:
    - ampache
  tags:
    - ampache-step

- hosts:
    - owncloud
  roles:
    - owncloud
  tags:
    - owncloud-step

- hosts:
    - desktop
    - laptop
    - phone
  roles:
    - owncloud-client
  tags:
    - owncloud-step

- hosts:
    - desktop
    - laptop
  roles:
    - desktop
    - development
    - multimedia
  tags:
    - utilities-step

- hosts:
    - laptop
  roles:
    - laptop
  tags:
    - utilities-step

- hosts:
    - phone
  roles:
    - phone
  tags:
    - utilities-step

