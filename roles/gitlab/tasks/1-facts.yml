---

- name: Detect Git version
  command:
    git --version
  changed_when: no
  register: git_version

- name: Check install mode and Git >= 1.7.10
  assert:
    that:
      - "gitlab_install_mode in ['manual', 'omnibus']"
      - git_version.stdout is undefined or git_version.stdout.split(' ')[-1]|version_compare('1.7.10', '>=')
