---

- name: Start Nginx service
  supervisorctl: >
    name=nginx state=started
  ignore_errors: yes
  register: nginx_start_result
  become: yes

- name: Restart Nginx service
  supervisorctl: >
    name=nginx state=restarted
  become: yes
  when: nginx_start_result|failed
