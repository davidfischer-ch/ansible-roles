---

- block:
    - name: Start Nginx service
      supervisorctl: >
        name=nginx state=started
      ignore_errors: yes
      register: nginx_start_result

    - name: Restart Nginx service
      supervisorctl: >
        name=nginx state=restarted
      when: nginx_start_result|failed
  become: yes
