---

# FIXME install package control, gitgutter ... configure ...

- block:
    - name: Install ScudCloud PPA repository
      apt_repository: >
        repo=ppa:rael-gc/scudcloud state=present update_cache=yes
      when: "'scudcloud' in devops_packages"

    - name: Install devops packages
      apt: >
        name={{ item }} state=latest
      with_items: '{{ devops_packages }}'

    - name: Install programming packages
      apt: >
        name={{ item }} state=latest
      with_items: '{{ programming_packages }}'

    - block:
        - name: Download sublime text 3
          get_url: >
            url=https://download.sublimetext.com/sublime-text_build-{{ sublime_text_version }}_amd64.deb
            dest=/tmp/sublime-text_build-{{ sublime_text_version }}_amd64.deb
          become: no

        - name: Install sublime text 3
          apt: >
            deb=/tmp/sublime-text_build-{{ sublime_text_version }}_amd64.deb
      when: sublime_text_version is defined and sublime_text_version
  become: yes
  tags: packages
  when: development_has_run is undefined

- set_fact: development_has_run=yes
  tags: always
