---

dependencies:
  - role: requirements
    key_requirements:
      - https://www.postgresql.org/media/keys/ACCC4CF8.asc
    ppa_requirements:
      - 'deb http://apt.postgresql.org/pub/repos/apt/ {{ ansible_distribution_release }}-pgdg main'
    apt_requirements: '{{ postgresql_packages }}'
    pip2_requirements:
      - psycopg2
    when: postgresql_has_run is undefined

  - role: ufw
    ufw_rules: '{{ postgresql_ufw_rules }}'
    when: postgresql_has_run is undefined and postgresql_ufw_rules
