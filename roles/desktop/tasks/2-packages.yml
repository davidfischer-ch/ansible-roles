---

# Miscellaneous

- name: Install Nemo PPA repository
  apt_repository: >
    repo=ppa:webupd8team/nemo state=present update_cache=yes
  become: yes
  when: desktop_package == 'ubuntu-desktop' and 'nemo' in ubuntu_desktop_packages

# Desktop

- name: Install Ubuntu desktop packages
  apt: >
    name={{ item }} state=latest
  with_items:
    - "{{ desktop_package }}"
    - ubuntu-minimal
    - ubuntu-restricted-addons
    - ubuntu-restricted-extras
    - libavcodec-extra
    - ubuntu-standard
  become: yes

- name: Install desktop and office packages
  apt: >
    name={{ item }} state=latest
  with_items: office_packages
  become: yes

- name: Install Ubuntu desktop and office packages
  apt: >
    name={{ item }} state=latest
  with_items: ubuntu_desktop_packages
  become: yes
  when: desktop_package == 'ubuntu-desktop'

- name: Install system packages
  apt: >
    name={{ item }} state=latest
  with_items: system_packages
  become: yes

- name: Update apt-file cache
  command: >
    apt-file update

- name: Remove bumblebee packages
  apt: >
    name={{ item }} state=absent
  with_items:
    - bumblebee
    - bumblebee-nvidia
  become: yes

- name: Install files utilities packages
  apt: >
    name={{ item }} state=latest
  with_items: file_utility_packages
  become: yes

- name: Install java packages
  apt: >
    name={{ item }} state=latest
  with_items: java_packages
  become: yes

- name: Install miscellaneous packages
  apt: >
    name={{ item }} state=latest
  with_items: miscellaneous_packages
  become: yes

- name: Install virtualization packages
  apt: >
    name={{ item }} state=latest
  with_items: virtualization_packages
  become: yes

- name: Install web packages
  apt: >
    name={{ item }} state=latest
  with_items: web_packages
  become: yes
